$(document).bind("mobileinit",function(){$.mobile.changePage.defaults.changeHash=false;$.mobile.hashListeningEnabled=false;$.mobile.pushStateEnabled=false});(function(c){c.chintBodyMain=$("#chintBodyMain");c.modifyPanel=$("#modifyPanel");c.modifyInner=modifyPanel.find(".ui-panel-inner");c.filterPanel=$("#filterPanel");c.filterInner=filterPanel.find(".ui-panel-inner");c.popup=$("#modifyPopup");c.loading=$("#loading-modal");var b={};var a={};var d={"dev":b,"json":a};b.basePath=window.location.toString().substr(0,window.location.toString().indexOf("GIMS")+5);b.imgPath="/GIMS/view/mobile/manager/img/";b.jsonPath="view/mobile/manager/data/";b.organon="organon.png";b.modulePath="/GIMS/view/mobile/manager/js/modules";b.loginPage="view/mobile/login.html";b.mainPage="view/mobile/index.html";b.baiduMap="http://api.map.baidu.com/getscript?v=1.4";b.longitude="120.152272";b.latitude="30.261528";b.checkUser="checkuser.do";b.qiutLogout="mobileLogout.do";b.modifyPwd="modifyPwd.do";b.getSessionStorage="getSessionStorage.do";b.menuTreeLists=b.jsonPath+"menuTreeList.json";b.getMenuTreeNoEmptys="sysTblsysmenu/getMenuTreeNoEmpty.do";b.newAlerts="gasTblalert/searchAlert.do";b.newestActions="issueTblnews/dataList.do";b.gasProfiles="gasReport/getGasAnalysisDataByHomepage.do";b.annualGasProfiles="gasReport/getGasAnalysisDataByHomepage.do";b.draftedByMonths="gasAnalysis/getGasMonthDataByHomepage.do";b.areaTollAnalyzes="gasAnalysis/getGasZoneDataByHomepage.do";b.analysisData="gasReport/getGasAnalysisDataByHomepage.do";b.searchDeviceByZone="gasTblcustomer/searchDeviceByZone.do";b.getPidcardTree="gasTblcustomer/getPidcardTree.do";b.getTypeCodeTree="gasTblcustomer/getTypeCodeTree.do";b.deviceDetail="gasTblcustomer/deviceDetail.do";b.getAccountNo="gasTblcustomer/getAccountNo.do";b.addInfo="gasTblcustomer/addInfo.do";b.accountInfoDataList="gasTblcustomer/dataList.do";b.accountInfoSave="gasTblcustomer/save.do";b.accountInfoTransfer="gasTblcustomer/transfer.do";b.stopCustomer="gasTblcustomer/stopCustomer.do";b.startCustomer="gasTblcustomer/startCustomer.do";b.cancelCustomer="gasTblcustomer/cancelCustomer.do";b.changeDevice="gasTblcustomer/changeDevice.do";b.changeDeviceConfirm="gasTblcustomer/changeDeviceConfirm.do";b.customerDetail="gasTblcustomer/customerDetail.do";b.gasTblcardDataList="gasTblcard/dataList.do";b.gasTblcardUserCard="gasTblcard/userCard.do";b.lossReport="gasTblcard/lossReport.do";b.dataListPay="gasTblcustomer/dataListPay.do";b.getGasMeterPrice="gasTblcustomer/getPrice.do";b.getAccountPayId="gasTblcustomer/getPayId.do";b.calculateGasMoney="gasTblcustomer/calculateGasMoney.do";b.saveBalance="gasTblcustomer/saveBalance.do";b.supplementGas="gasTblcustomer/supplementGas.do";b.getDataListArrears="gasTblcustomer/dataListArrears.do";b.getMsgDetail="gasTblcustomer/searchMessage.do";b.dataListBills="gasTblcustomer/dataListBills.do";b.getTblPrice="gasTblprice/dataList.do";b.getPricePushInfo="gasTblprice/getPricePushInfo.do";b.getDataListLogs="gasTblcustomer/dataListLogs.do";b.searchScadaLastData="baseTbldevice/searchScadaLastData.do";b.getConcentratorState="baseTbldevice/getConcentratorState.do";b.listDormantCustomer="gasTblcustomer/listDormantCustomer.do";b.dataListTrans="gasTblcustomer/dataListTrans.do";b.queryFrozenDataDaily="gasFrozenData/queryFrozenDataDaily.do";b.queryFrozenDataMonthly="gasFrozenData/queryFrozenDataMonthly.do";b.getBussinessPart="reportDetail/getBussinessPart.do";b.searchIncidentAlert="gasTblalert/searchAlert.do";b.optionGroups="sysTblsysoption/getOptionGroup.do";b.sysOptionsDataList="sysTblsysoption/dataList.do";b.sysOptionsDataModify="sysTblsysoption/save.do";b.sysTblroleDataList="sysTblrole/dataList.do";b.sysTblroleGetId="sysTblrole/getId.do";b.sysTblroleDataModify="sysTblrole/save.do";b.sysTblroleDataDelete="sysTblrole/delete.do";b.sysTblroleGetAllRole="sysTblrole/getAllRole.do";b.sysTblUserDataList="sysTbluser/dataList.do";b.updateInitPassword="sysTbluser/updateInitPassword.do";b.baseTbZoneGetZoneTree="baseTblzone/getZoneTree.do";b.sysTbldepartDataList="sysTbldepart/getDepartTree.do";b.sysTblRoleSave="sysTbluser/save.do";b.sysTblRoleDelete="sysTbluser/delete.do";b.sysTblMenuDataList="sysTblsysmenu/dataList.do";b.sysTblMenuSave="sysTblsysmenu/save.do";b.sysTblMenuDelete="sysTblsysmenu/delete.do";b.sysTblDepartDataList="sysTbldepart/dataList.do";b.sysTblDepartSave="sysTbldepart/save.do";b.sysTblDepartDelete="sysTbldepart/delete.do";b.sysTblCompanyDataList="sysTblcompany/dataList.do";b.sysTblCompanySave="sysTblcompany/save.do";b.sysTblCompanyDelete="sysTblcompany/delete.do";b.baseTblZoneDataList="baseTblzone/dataList.do";b.baseTblZoneSave="baseTblzone/save.do";b.baseTblZoneDelete="baseTblzone/delete.do";b.baseTblZoneTree="baseTblzone/getZoneTreeByUser.do";b.getZoneCodeTree="baseTblzone/getZoneCodeTree.do";b.baseTblDeviceDataList="baseTbldevice/dataList.do";b.baseTblDeviceSave="baseTbldevice/save.do";b.baseTblDeviceDelete="baseTbldevice/delete.do";b.baseTblDeviceTypeTree="baseTbldevice/getDeviceTypeTree.do";b.baseTblDeviceModelTree="baseTbldevice/getDeviceModelTree.do";
b.getConcentratorByZone="baseTblconcentrator/getConcentratorByZone.do";b.baseTblDeviceTypeDataList="sysTbldevicetype/dataList.do";b.baseTblDeviceTypeSave="sysTbldevicetype/save.do";b.baseTblDeviceTypeDelete="sysTbldevicetype/delete.do";b.baseTblDeviceCardType="baseTbldevice/getCardTypeTree.do";b.issueTblnewsDataList="issueTblnews/dataList.do";b.sysTbllogDataList="sysTbllog/dataList.do";b.workTblsheetData="workTblsheet/dataList.do";b.type="dev";c.config=d[b.type];c.chintPlugins={}})(window);
!(function(a){a.fn.extend({test:function(){console.log("this is test ...")}});a.customAjax=function(b,f,g,e,d,c){loading.show();a.ajax({type:d||"post",url:b,data:f,dataType:c||"json",async:e||true,success:function(h){loading.hide();g("success",h)},error:function(h,j,i){g("请求失败",h.responseText)}})};a.hintLabel=function(c,d,b){c[0].innerHTML=d;c[0].style.color=b||"red";c.show()};a.parseVoidValue=function(c,b){c=c?c:(c===0?c:(b||""));return c};a.parseValue=function(c,b,d){c=(1==c)?b:((2==c)?d:"");return c};a.parseDoubleValue=function(d,c,b){d=(1==d)?c:((0==d)?b:"");return d};a.parseMinusPlusDouble=function(c,b,d){c=(1==c)?b:((0==c)?d:"");return c};a.parseTribleValue=function(e,d,c,b){e=(1==e)?d:((0==e)?c:((-1==e)?b:""));return e};a.parseTribleWithT=function(e,d,c,b){e=(1==e)?d:((2==e)?c:((-1==e)?b:""));return e};a.setParamsFormTextarea=function(d,b){var c=b.find("textarea");d[c[0].name]=c[0].value;return d};a.numberInputs=function(b){b.on("change",function(){var c=this.value;if(/^d*(?:.d{0,2})?$/.test(this.value)){console.log(" this is number test ...")}c=c.replace(/[^\d]/gi,"");this.value=c+".00"})};a.floatNumberInput=function(b){b.on("change",function(){this.value=this.value?parseFloat(this.value).toFixed(2):""});b.on("keydown",function(c){var d=c.keyCode;if((d>95&&d<106)||(d>47&&d<58)||d==110||d==190||d==8){if(this.value.includes(".")&&(d==110||d==190)){return false}return true}else{return false}})};a.choseOnlyOne=function(b,c){b.on("change",function(){var d=this.value;if(d.length>0){c.attr("readonly",true)}else{c.attr("readonly",false)}});c.on("change",function(){var d=this.value;if(d.length>0){b.attr("readonly",true)}else{b.attr("readonly",false)}})};a.addScript=function(b,e){if(b!=null){var c=document.getElementsByTagName("BODY").item(0);var d=document.createElement("script");d.type="text/javascript";d.src=b;c.appendChild(d)}};a.getBMapInfo=function(d,e){if(!e){e=document.body.clientHeight-165;e=(e<520)?520:e}d.append(a("<div id='BMapContainner' style='height:"+e+"px;' />")).trigger("create");var f=new BMap.Map("BMapContainner");var c=new BMap.Point(config.longitude,config.latitude);f.centerAndZoom(c,16);f.enableScrollWheelZoom();var b=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});f.addControl(b);window.chintMap=f};a.pollingToGetMap=function(f){var b=null;var d=function(){if("undefined"!==(typeof BMap)){f();clearInterval(b)}};try{b=setInterval(d,500)}catch(c){console.log("the exception is : ",c)}};a.getBMap=function(d,c){a.addScript(config.baiduMap);var b=function(){a.getBMapInfo(d,c)};a.pollingToGetMap(b)};a.retrieveArea=function(){var c=modifyInner.find(".retrieveInput").val();var b=new BMap.LocalSearch(chintMap,{renderOptions:{map:chintMap}});b.search(c)};a.clickMapToAddMark=function(){chintMap.addEventListener("click",function(d){modifyInner.find("#longitude").val(d.point.lng);modifyInner.find("#latitude").val(d.point.lat);var b=new BMap.Point(d.point.lng,d.point.lat);var c=new BMap.Marker(b);chintMap.clearOverlays();chintMap.addOverlay(c)})};a.fadeInPlugin=function(b){a.messager.anim("fade",2000);a.messager.show(0,b)};a.emptyInnerPanel=function(){clearInterval(chintPlugins.newsAlertInterval);chintBodyMain.empty();filterInner.empty();modifyInner.empty()};a.queryContext=function(i,j,h,c,k){var e={};e.rows=10000;var d=chintPlugins.radioPlugin;var g=i.find(".chintInput");g.each(function(l,m){e[m.name]=m.value});var f=i.find(".radioChecked");f.each(function(m,n){var l=n.name.toString();l=l.substr(0,l.lastIndexOf("-")).replace("radio-choice-","");e[l]=d.getValueFromEle(n)});for(var b in c){e[b]=c[b]}h(e,k);j.panel().panel("close")};a.clickModifyLabel=function(){modifyInner.find("label")[0].textContent="添加";modifyInner.find(".hintLabel").hide();modifyInner.find(".chintInput").val("");modifyInner.find("button").attr("id","");modifyPanel.panel().panel("open")};a.modifyEvent=function(e){var g=chintPlugins.radioPlugin;var b=JSON.parse(e.parentNode.parentNode.attributes.userData.value);modifyPanel.find("label")[0].textContent="修改";var d=modifyPanel.find("input");d.each(function(i,h){this.value=b.data[this.name]});var c=modifyPanel.find("textarea");c[0]=b.data.description;var f=modifyInner.find("button");f.attr("id",b.data.id);modifyInner.find(".hintLabel").hide();modifyPanel.panel().panel("open")};a.renderPopup=function(b,c){b.find("h1")[0].textContent=c.h1;b.find("h3")[0].textContent=c.h3;b.find("a")[0].textContent=c.a0;b.find("a")[1].textContent=c.a1;return b};a.deleteSelectedData=function(c,e,i){var d={h1:"删除",h3:"确定要删除本条记录?",a0:"删除",a1:"取消"};var b=a.renderPopup(a("#modifyPopup"),d);var f=a(c).parent().parent();var h=JSON.parse(f.attr("userData")).data.id;var g=a(b.find("a")[0]);g.attr("deleteparam",JSON.stringify({id:h}));g.on("click",function(){var j=JSON.parse(a(this).attr("deleteparam"));var k=[];k.push(j.id);a.customAjax(""+e,{id:k.toString()},function(l,m){i({rows:1000});console.log("删除信息:",m.msg)})})}})(jQuery);